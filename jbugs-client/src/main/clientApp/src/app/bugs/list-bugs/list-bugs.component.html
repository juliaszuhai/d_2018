<button mat-raised-button color="primary" style="margin: 30px 0;" (click)="openAddBug()">
  <i class="material-icons">bug_report</i> {{ 'addBug.buttonAddBug' | translate}}
</button>

<div class="list-bugs-page">
  <div class="bugs-controls">

    <div class="filters">
      <h3>{{'bugFilter.filter'|translate}}</h3>
      <form
        #filterForm
        onsubmit="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)">
        <mat-form-field>
          <input
            matInput
            #titleElement
            placeholder="{{'bugFilter.title'|translate}}"
            (change)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"
          >
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            #descriptionElement
            (change)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"
            placeholder="{{'bugFilter.description'|translate}}">
        </mat-form-field>
        <mat-form-field>
          <!--<input-->
          <!--matInput-->
          <!--#statusElement-->
          <!--(change)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"-->
          <!--placeholder="{{'bugFilter.status'|translate}}">-->
          <mat-select placeholder="{{'bugTable.status'| translate}}"
                      #statusElement
                      (selectionChange)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"
          >
            <mat-option>--</mat-option>
            <mat-option value="IN_PROGRESS">IN PROGRESS</mat-option>
            <mat-option *ngFor="let status of statuses" [value]="status">
              {{status}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <!--<input-->
          <!--matInput-->
          <!--#severityElement-->
          <!--(change)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"-->
          <!--placeholder="{{'bugFilter.severity'|translate}}">-->
          <mat-select placeholder="{{'bugTable.severity'| translate}}"
                      #severityElement
                      (selectionChange)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"
          >
            <mat-option>--</mat-option>
            <mat-option *ngFor="let severity of severities" [value]="severity">
              {{severity}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </form>
    </div>
    <div class="bug-sorts">
      <h3>{{'bugFilter.sort'|translate}}</h3>
      <mat-checkbox #sortElementTitle (change)="toggleSort('title', sortElementTitle.checked)">
        {{'bugFilter.titleSort'|translate}}
      </mat-checkbox>


    </div>
    <button mat-stroked-button color="primary"
            routerLinkActive="active"
            routerLink="statistic-bug">
      {{'statistics.statistics'|translate}}
    </button>
  </div>
  <div class="bug-table">
    <table mat-table [dataSource]="bugList" class="mat-elevation-z8">


      <!--<ng-container matColumnDef="number">-->
      <!--<th mat-header-cell *matHeaderCellDef> Number</th>-->
      <!--<td mat-cell *matCellDef="let element"> {{element.id}}</td>-->

      <!--</ng-container>-->
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef> {{'bugTable.title'|translate}}</th>
        <td mat-cell *matCellDef="let element">
          <button mat-button color="primary" (click)="openDialog(element)">
            {{element.title}}
          </button>

        </td>

      </ng-container>
      <!--<ng-container matColumnDef="version">-->
      <!--<th mat-header-cell *matHeaderCellDef> Version</th>-->
      <!--<td mat-cell *matCellDef="let element"> {{element.version}}</td>-->

      <!--</ng-container>-->

      <ng-container matColumnDef="targetDate">
        <th mat-header-cell *matHeaderCellDef> {{'bugTable.targetDate'|translate}}</th>
        <td mat-cell *matCellDef="let element"> {{getDate(element.targetDate).toDateString()}}</td>
      </ng-container>


      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>{{'bugTable.status'|translate}}</th>
        <td mat-cell *matCellDef="let element"> {{getStatusTranslation(element.status)|translate}}</td>
      </ng-container>

      <!--<ng-container matColumnDef="fixedVersion">-->
      <!--<th mat-header-cell *matHeaderCellDef>FixedVersion</th>-->
      <!--<td mat-cell *matCellDef="let element"> {{element.fixedVersion}}</td>-->
      <!--</ng-container>-->

      <ng-container matColumnDef="severity">
        <th mat-header-cell *matHeaderCellDef>{{'bugTable.severity'|translate}}</th>
        <td mat-cell *matCellDef="let element"> {{getSeverityTranslation(element.severity)|translate}}</td>
      </ng-container>

      <ng-container matColumnDef="createdBy">
        <th mat-header-cell *matHeaderCellDef>{{'bugTable.createdBy'|translate}}</th>
        <td mat-cell *matCellDef="let element"> {{element.createdByUser.username}}</td>
      </ng-container>

      <ng-container matColumnDef="assignedTo">
        <th mat-header-cell *matHeaderCellDef>{{'bugTable.assignedTo'|translate}}</th>
        <td mat-cell *matCellDef="let element"> {{element.assignedTo.username}}</td>
      </ng-container>

      <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef> {{'bugTable.edit'| translate}}</th>
        <td mat-cell *matCellDef="let element">
          <button color="primary"
                  mat-raised-button
                  (click)="openUpdateDialog(element)"
          >
            <i class="material-icons">edit</i>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="exportExcel">
        <th mat-header-cell *matHeaderCellDef>
          <button mat-raised-button color="primary" (click)="downloadExcel()"><i class="material-icons">
            file_download
          </i>Export Excel
          </button>
        </th>
        <td mat-cell *matCellDef="let element">
          <mat-checkbox #excelElem (change)="onChangeCheck(element, excelElem.checked)"></mat-checkbox>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;">

      </tr>
    </table>
    <mat-paginator
      [length]="length"
      [pageSize]="pageSize"
      (page)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value,$event.pageIndex*$event.pageSize,$event.pageSize)"
    >
    </mat-paginator>
  </div>
</div>
